
version: "3.8"
    
services:
  speedway-campbell:
    container_name: speedway-campbell
    volumes:
      - type: bind
        source: /home/norris/Documents/mmitss-az/config/speedway-sample/simulation/speedway-campbell/nojournal/bin
        target: /nojournal/bin
    networks:
      mmitss_vlan:
        ipv4_address: 192.168.12.3
    ports:
      - "9001:9001"  # Replace with the correct port if needed
    image: mmitssuarizona/mmitss-mrp-${PROCESSOR}:3.0
    environment:
      - TZ=America/Phoenix

    security_opt:
      - apparmor=unconfined

  speedway-cherry:
    container_name: speedway-cherry
    volumes:
      - type: bind
        source: /home/norris/Documents/mmitss-az/config/speedway-sample/simulation/speedway-cherry/nojournal/bin
        target: /nojournal/bin
    networks:
      mmitss_vlan:
        ipv4_address: 192.168.12.6
    ports:
      - "9002:9002"  # Replace with the correct port if needed
    image: mmitssuarizona/mmitss-mrp-${PROCESSOR}:3.0
    environment:
      - TZ=America/Phoenix

    security_opt:
      - apparmor=unconfined

  speedway-mountain:
    container_name: speedway-mountain
    volumes:
      - type: bind
        source: /home/norris/Documents/mmitss-az/config/speedway-sample/simulation/speedway-mountain/nojournal/bin
        target: /nojournal/bin
    networks:
      mmitss_vlan:
        ipv4_address: 192.168.12.9
    ports:
      - "9003:9003"  # Replace with the correct port if needed
    image: mmitssuarizona/mmitss-mrp-${PROCESSOR}:3.0
    environment:
      - TZ=America/Phoenix

    security_opt:
      - apparmor=unconfined

  speedway-park:
    container_name: speedway-park
    volumes:
      - type: bind
        source: /home/norris/Documents/mmitss-az/config/speedway-sample/simulation/speedway-park/nojournal/bin
        target: /nojournal/bin
    networks:
      mmitss_vlan:
        ipv4_address: 192.168.12.12
    ports:
      - "9004:9004"  # Replace with the correct port if needed
    image: mmitssuarizona/mmitss-mrp-${PROCESSOR}:3.0
    environment:
      - TZ=America/Phoenix

    security_opt:
      - apparmor=unconfined

  simulation_server-tools:
    container_name: simulation_server-tools
    volumes:
      - type: bind
        source: /home/norris/Documents/mmitss-az/config/simulation_server-tools/nojournal/bin
        target: /nojournal/bin
    networks:
      mmitss_vlan:
        ipv4_address: 192.168.12.20
    ports:
      - "9005:9005"  # This is the port mapping for the supervisord web interface
    image: mmitssuarizona/mmitss-simulation_server-tools-${PROCESSOR}:3.0
    environment:
      - TZ=America/Phoenix

    security_opt:
      - apparmor=unconfined

networks:
  mmitss_vlan:
    driver: macvlan
    driver_opts:
      parent: enp0s3
    ipam:
      config:
        - subnet: 192.168.12.0/24
          gateway: 192.168.12.1
